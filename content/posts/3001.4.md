---
title: "ğŸ§® CSC3001 LEC6-7 æ•°å­¦å½’çº³æ³•"
date: 2025-09-11T11:31:34+08:00
draft: false
summary: "CUHKSZ CSC3001 æ›´å¤šæ•°å­¦è¯æ˜æ³•"
categories: 
- SDS
tags: 
- CSC3001
featured_image: "/images/30013.jpg"
---



(æ¶µç›–ç¬¬ 5 ä¸ªè®²ä¹‰)

# LN5 Recursion é€’å½’

é€’å½’æ˜¯æ•°å­¦å½’çº³æ³•çš„åº•å±‚é€»è¾‘ï¼Œä¹Ÿæ˜¯ coding ä¸­çš„å¸¸ç”¨æ‰‹æ®µã€‚

<br>

## é€’å½’æ€æƒ³

### é›†åˆçš„å¹‚é›†åŸºæ•°
å¯¹äº Sn = {a<sub>1</sub>, a<sub>2</sub>,..., an}ï¼Œæ±‚ |pow(S<sub>n</sub>)| çš„é€’æ¨å¼?
S1 = {Ã¸, {a1}}, S2 = {Ã¸, {a<sub>1</sub>}, {a<sub>2</sub>}, {a<sub>1</sub>, a<sub>2</sub>}} ......
æ‰€ä»¥ S<sub>n+1</sub> å«æœ‰æ‰€æœ‰ S<sub>n</sub> å«æœ‰çš„å…ƒç´ ï¼Œä»¥åŠè¿™äº›å…ƒç´ ä¸ an+1 çš„å¹¶é›†ï¼š(Se è¡¨ç¤º S çš„å„ä¸ªå…ƒç´ )$$S_{n+1}=\{{Se_n, Se_nâˆª\{a_{n+1}\}}\}$$
æ‰€ä»¥ |pow(S<sub>n+1</sub>)|  = 2|pow(S<sub>n</sub>)| 

<br>


### æ²¡æœ‰â€œ111â€çš„äºŒè¿›åˆ¶æ•°
å¯¹äº n æ¯”ç‰¹çš„ï¼Œä¸å­˜åœ¨â€œ111â€ç»“æ„çš„äºŒè¿›åˆ¶æ•° B<sub>n</sub> çš„æ•°é‡çš„é€’æ¨å¼ï¼Ÿ
B<sub>1</sub>ï¼š{1, 0} â†’2
B<sub>2</sub>ï¼š{10, 01, 11, 00} â†’4
B<sub>3</sub>ï¼š{110, 000, 010, 011, 001, 100, 101} â†’7
B<sub>4</sub>ï¼š{1100,  0011, 1011, 1101, 0000, 1000, 0001, 0101, 1010, 0100, 0110, 0010, 1001} â†’13
......
è§‚å¯Ÿ B<sub>4</sub> ä¸­çš„å…ƒç´ ï¼š

- {0110, 0000, 0010, 0011, 0001, 0100, 0101} ä» 3 ä¸­å¾—åˆ°ï¼Œå…¨éƒ¨éƒ½å¯ä»¥**å·¦åŠ ä¸€ä½ 0**
  {1010, 1001, 1011, 1000} ä» 2 ä¸­å¾—åˆ°ï¼Œå…¨éƒ¨å¯ä»¥**å·¦åŠ ä¸¤ä½ 10**
  {1101, 1100} ä» 1 ä¸­å¾—åˆ°ï¼Œå…¨éƒ¨å¯ä»¥**å·¦åŠ ä¸‰ä½ 110**
- ä¹Ÿå¯ä»¥ç†è§£ä¸º â€œ**B<sub>3</sub> ä¸­éƒ½å¯ä»¥åŠ ä¸€ä½ 0ï¼Œä½†æ‰€æœ‰åœ¨æœ€é«˜ä¸¤ä½ä¸æ˜¯ 11 çš„æ‰å¯ä»¥åŠ ä¸€ä½ 1**â€
æ‰€ä»¥ |B<sub>n</sub>| = |B<sub>n-1</sub>| + |B<sub>n-2</sub>| + |B<sub>n-3</sub>| (n>3)

<br>

<br>

## é€’å½’è§£é¢˜

#### æ ¸å¿ƒæ€æƒ³ï¼šå¤§åˆ™åŒ–å°ã€å¤šåˆ™å½’ä¸€ã€åˆ†è€ŒåŒ–ä¹‹

<br>

### æ±‰è¯ºå¡”(æ²³å…§å¡”)
ä¸‰ä¸ªæŸ±å­ï¼Œn ä¸ªåœ¨æœ€å·¦ä¾§ä»å¤§åˆ°å°å èµ·æ¥çš„åœ†ç›˜ã€‚è¦åœ¨ä¿æŒæ¯æ ¹æŸ±å­ä¸Šéƒ½æ˜¯å¤§ç›˜å­åœ¨å°çš„ä¸‹é¢çš„å‰æä¸‹ï¼ŒæŠŠæœ€å·¦ä¾§çš„ç›˜å­åŸå°ä¸åŠ¨çš„å‘ˆç°åœ¨æœ€å³ä¾§ï¼Œéœ€è¦å¤šå°‘æ­¥ f(n) ï¼Ÿ

- ä¸ºäº†ç®€æ´ï¼Œæˆ‘ä»¬æŠŠæœ€å°çš„ç›˜å­ å«åš 1ï¼Œæœ€å¤§çš„å«åš nï¼›æŸ±å­ä¾æ¬¡å«åš a, b, cï¼š

- n=1: 1->c

- n=2: 1->bã€2->cã€1->c

- n=3: 1->cã€2->bã€1->bã€3->cã€1->aã€2->cã€1->c

  ![](https://i.postimg.cc/pr1hBVg7/hanota-divide-and-conquer.png)

è§‚å¯Ÿ n=3ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºï¼šå…ˆå°†è¾ƒå°ä¸¤ç›˜ç§»å¼€ï¼ŒæŠŠæœ€å¤§ç›˜ç§»åˆ°æœ€å³è¾¹ï¼Œå†ç§»åŠ¨è¾ƒå°ä¸¤ç›˜åˆ°æœ€å³è¾¹ã€‚ä¸­é—´é‚£éƒ¨ç­‰ä»·äº n=1ï¼›è€Œå‰åä¸‰æ­¥æœ¬è´¨ä¸Šéƒ½æ˜¯æƒ³å°†ä¸¤ä¸ªåœ†ç›˜(ä¸å˜é¡ºåº)ç§»åˆ°å¦ä¸ªæŸ±å­(â€œä» a åˆ° bâ€ å’Œ â€œä» b åˆ° câ€)ã€‚ä¸éš¾å‘ç° n=2 çš„ç›®çš„ æ°å¥½ä¹Ÿæ˜¯ç±»ä¼¼çš„ â€œä» a ç§»åˆ° câ€ã€‚**å› ä¸ºä¸‰ä¸ªæŸ±å­æ²¡æœ‰â€œç‹¬ç‰¹æ€§â€ï¼Œæ•…æ— è®ºä»å“ªç§»åˆ°å“ªï¼Œåœ†ç›˜æ•°ç›¸åŒæ—¶ï¼Œæ­¥éª¤æ•°ä¸€å®šç›¸åŒã€‚**æ‰€ä»¥è§£æ f(3) å¯ä»¥ ä¾æ¬¡è°ƒç”¨ f(2)ã€f(1)ã€f(2)ã€‚
**æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŒœæµ‹ f(3) = 2f(2)+1ï¼Œæ¨è‡³ f(n) = fS(n-1)+1**ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://i.postimg.cc/GtpTYTSG/hanota-recursive-tree.png)

æŒ‰ä¸Šè¿°é€»è¾‘ï¼Œä»»ä½•æƒ…å†µä¸‹æ±‰è¯ºå¡”é—®é¢˜éƒ½å¯ä»¥é€’å½’è¿›è¡Œâ€œ**ä¸‰åˆ†æ‹†è§£**â€ï¼Œæœ€åå‰©ä¸‹ä¸€ç³»åˆ—å•æ¬¡ç§»åŠ¨ã€‚æ‰€ä»¥æˆ‘ä»¬åŸºæœ¬ä¸Šåªéœ€è¦å®šä¹‰**å•æ¬¡ç§»åŠ¨æ–¹æ³•ã€ä¸‰åˆ†é€’å½’æ–¹æ³•ã€é€’å½’å…¥å£æ–¹æ³•å’Œä¸»æ–¹æ³•**å°±å¯ä»¥å†™å‡º Python çš„è§£æ³•ï¼š

```python
def move(src: list[int], tar: list[int], name_src: str, name_tar: str, steps: list[int], A, B, C):
    # ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜ï¼Œå¹¶æ‰“å°å½“å‰çŠ¶æ€
    pan = src.pop() # è®°å½•å¹¶å»æ‰ source æ•°ç»„é¡¶éƒ¨çš„å…ƒç´ 
    tar.append(pan) # å°†å…¶åŠ åˆ° target æ•°ç»„
    steps[0] += 1
    print(f"ç¬¬ {steps[0]} æ­¥: {name_src} -> {name_tar}")
    print(f"A={A}, B={B}, C={C}\n")

def dfs(i: int, src: list[int], buf: list[int], tar: list[int], # é€’å½’ f(i)
        name_src: str, name_buf: str, name_tar: str,
        steps: list[int], A, B, C):
    if i == 1:
        move(src, tar, name_src, name_tar, steps, A, B, C)
        return
    dfs(i - 1, src, tar, buf, name_src, name_tar, name_buf, steps, A, B, C)  # f(i-1)
    move(src, tar, name_src, name_tar, steps, A, B, C)  # f(1)
    dfs(i - 1, buf, src, tar, name_buf, name_src, name_tar, steps, A, B, C)  # f(i-1)

def solve_hanota(A: list[int], B: list[int], C: list[int]):
    # æ±‚è§£å¹¶è¿”å›æ€»æ­¥æ•°
    n = len(A)
    steps = [0]
    dfs(n, A, B, C, "A", "B", "C", steps, A, B, C)
    return steps[0]

if __name__ == "__main__":
    num = int(input("è¯·è¾“å…¥æ±‰è¯ºå¡”åœ†ç›˜æ•°é‡ï¼š"))  # æ³¨æ„ input è‡ªåŠ¨å­˜å‚¨ä¸º type:str
    A = list(range(num, 0, -1))  # [num, num-1, ..., 1]
    B = []  # ä¹Ÿå¯ä»¥å†™ list[int]
    C = []
    total_steps = solve_hanota(A, B, C)
    print(f"å…±ç§»åŠ¨äº† {total_steps} æ­¥ã€‚")
```

<br>

### å¡å¡”å…°æ•°(Catalan Numbers)

ç”¨ n ç»„æ­£åæ–œæ å¯ä»¥ç»„æˆå¤šå°‘ç§â€œå±±è„‰â€å›¾ï¼Ÿ(ä¸èƒ½ä½äºåŸºå‡†çº¿)åˆæ³•çš„â€œå±±è„‰â€æ¯”å¦‚ï¼š

![](https://i.postimg.cc/QCC7WY6j/2025-09-20-10-43-22.png)

è®°é€’æ¨å¼ä¸º m(n)ï¼Œè§‚å¯Ÿåå‘ç°ï¼Œæ‰€æœ‰å±±è„‰çš„ â€œé¡¶éƒ¨â€ éƒ½æ˜¯ â€œ`/\`" ç»“æ„ã€‚æˆ‘ä»¬ä¸å¦¨å°†å±±åˆ†ä¸ºä¸¤ä¸ªç»„åˆ†ï¼š"U":å±±è…°ï¼Œå’Œ "E":å±±é¡¶ ( â€œ`/\`" ç»“æ„) ã€‚æ¯”å¦‚å›¾ä¸­ n=3 å¯ä»¥æŠ½è±¡ä¸º EEE, EU<sup>E</sup>, U<sup>E</sup>E, U<sup>EE</sup>å’ŒU<sup>U<sup>E</sup></sup>ã€‚**æˆ‘ä»¬å¯ä»¥ç”¨äºŒåˆ†æ³•å°†å…¶ç†è§£ä¸ºä¸€éƒ¨åˆ†â€åœ¨ U ä¸Šçš„â€œ å’Œ å‰©ä½™éƒ¨åˆ†â€è‡ªç”±åˆ†é…çš„â€œï¼š**

1ã€â€œE ...å‰©ä½™ n-1 é¡¹...â€ï¼šm(0) x m(n-1)

2ã€â€œU<sup>ä¸€é¡¹</sup>...å‰©ä½™ n-2 é¡¹...â€ï¼šm(1) x m(n-2)

3ã€â€œU<sup>ä¸¤é¡¹</sup>...å‰©ä½™ n-3 é¡¹...â€ï¼šm(2) x m(n-3)

kã€â€œU<sup>k-1é¡¹</sup>...å‰©ä½™ n-k é¡¹...â€ï¼šm(k-1) x m(n-k)

$$æ‰€æœ‰æƒ…å†µåŠ èµ·æ¥å°±æ˜¯ â€å¡å¡”å…°æ•°â€œï¼šm(n) = \sum_{k=1}^{k=n} m(k-1) \times m(n-k)$$

$$åˆè®°ä½œï¼šCatalan_n = \frac1{n+1}\binom{2n}{n} = \frac{(2n)!}{(n+1)!\,n!}$$

<br>

<br>

## è§£é€’æ¨å¼

### ä¸€å…ƒçº¿æ€§é€’æ¨å±•å¼€å…¬å¼
- é½æ¬¡çº¿æ€§é€’æ¨å¼(ä¸€æ¬¡é¡¹ç³»æ•°â‰ 1)ï¼š$$a_k=r a_{k-1}\ \to\ a_k=r^{k-1}a_1$$
- éé½æ¬¡åŸºå‡†çº¿æ€§é€’æ¨å¼(ä¸€æ¬¡é¡¹ç³»æ•°=1)ï¼š$$a_k = a_{k-1} + b\ \to\ a_k = a_1 + (k-1)b$$
- éé½æ¬¡çº¿æ€§é€’æ¨å¼(ä¸€æ¬¡é¡¹ç³»æ•°â‰ 1)å¦‚æ±‰è¯ºå¡”ï¼š$$a_k=r a_{k-1}+b\ \to \ a_k=r^{k-1}a_1+\frac{b\,(r^{\,k-1}-1)}{r-1}$$

<br>

### ä¸€å…ƒéçº¿æ€§(äºŒåˆ†æ³•)é€’æ¨å¼

å¯¹äºäºŒåˆ†æ³•çš„é€’æ¨å¼ a<sub>2k</sub> = ma<sub>k</sub>+nk+cï¼š(C æ˜¯ç”¨é¦–é¡¹å¸¦è¿›å»ç®—å‡ºæ¥çš„å¸¸æ•°)

- ä¸€èˆ¬è§£(m\neq 1,2)ï¼š$$a_{2k} = CÂ·2k^{log_2m} + \frac{n}{2-m}\,2k + \frac{c}{1-m}$$
- ç‰¹æ®Šæƒ…å†µ m=2ï¼š$$a_{2k} = CÂ·2k + nklog_22k - c$$
- ç‰¹æ®Šæƒ…å†µ m=1ï¼š$$a_{2k} = a_1 + n(k-1) + ct$$

æ¯”å¦‚å¯¹äºå½’å¹¶æ’åˆ— a<sub>2k</sub> = 2a<sub>k</sub>+2k = 2klog<sub>2</sub>(2k) 

<br>

